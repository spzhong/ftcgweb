webpackJsonp([16],{RePh:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={name:"housetable",data:function(){return{typeList:[{scid:3,cname:"女装"},{scid:6,cname:"男装"},{scid:9,cname:"童装"}],slist:[],slistid:"",tableData:[],otableData:[],xtableData:[],cur_page:1,activeName:"",jid:"",sid:"",multipleSelection:[],select_cate:"",select_word:"",del_list:[],is_search:!1,addVisible:!1,editVisible:!1,xaddVisible:!1,xeditVisible:!1,showtable:!0,form:{name:"",date:"",phone:""},idx:-1}},created:function(){var e=this;this.url="/testftcg/config/getStreets?token="+localStorage.token,this.$axios.get(this.url).then(function(t){1!=t.data.code?e.$message.error(t.data.msg):(t.data.code=1)?(e.tableData=t.data.data,e.activeName=e.tableData[0].name,e.jid=e.tableData[0].id,setTimeout(function(){console.log("id是："+e.jid),e.getData(e.tableData[0].id)},300)):console.log("不知出啥问题了")})},computed:{},methods:{getData:function(e){var t=this;this.url="/testftcg/config/getCommunitys?streetId="+e,this.$axios.get(this.url).then(function(e){1!=e.data.code?t.$message.error(e.data.msg):(e.data.code=1)?(t.slist=e.data.data,console.log(t.slist)):console.log("不知出啥问题了")}),this.url="/testftcg/config/adminGetVillages?streetId="+e,this.$axios.get(this.url).then(function(e){if(1!=e.data.code)t.$message.error(e.data.msg);else if(e.data.code=1){t.otableData=e.data.data,t.otableData.sort((a="number",function(e,t){return e[a]-t[a]})),t.otableData.some(function(e){var a={0:"普通小区",1:"学校",2:"政府机关",3:"收储运公司"};t.otableData.map(function(e){var t=e.type;return e.type=a[t]?a[t]:t,e})}),t.otableData.some(function(e){var a={0:"已启用",1:"已停用"};t.otableData.map(function(e){var t=e.isOpen;return e.isOpen=a[t]?a[t]:t,e})})}else console.log("不知出啥问题了");var a})},handleClick:function(e,t){var a=this.tableData[e.index].id;this.jid=a,this.getData(a),console.log("街道id是"+this.jid)},xgetData:function(e){var t=this;console.log("接受的id是"+e),this.url="/testftcg/config/getCommunitys?token="+localStorage.token+"&streetId="+e,this.$axios.get(this.url).then(function(e){if(console.log(e),1!=e.data.code)t.$message.error(e.data.msg);else if(e.data.code=1){t.xtableData=e.data.data;t.xtableData}else console.log("不知出啥问题了")})},handlecheck:function(e,t){this.showtable=!this.showtable,this.xgetData(t.id),localStorage.setItem("xid",t.id),this.jid=t.id,console.log(this.jid)},xhandlecheck:function(e,t){console.log(t.id)},back:function(){this.showtable=!this.showtable},add:function(e){this.addVisible=!0,console.log(this.jid),this.$message("click on item "+e),this.slistid=e},addtable:function(e){var t=this;null==this.form.addname?this.$message.error("请输入数据后再提交"):(this.url="/testftcg/config/baseConfigVillage?token="+localStorage.token+"&name="+this.form.addname+"&type="+this.form.addrole+"&streetId="+this.jid+"&communityId="+this.slistid+"&number="+this.form.addnumber+"&address="+this.form.addaddress+"&personCharge="+this.form.addpersonCharge+"&phone="+this.form.addphone+"&remarks="+this.form.addremarks,this.$axios.get(this.url).then(function(e){console.log(e),(e.data.code=1)?(t.addVisible=!1,t.$message.success("街道数据新增成功"),t.form.addname="",t.form.addnumber="",t.form.addaddress="",t.form.addpersonCharge="",t.form.addphone="",t.form.addremarks="",t.getData(t.jid)):t.$message.error(e.data.msg)}))},handleisopen:function(e,t){var a=this;"已启用"==t.isOpen?this.$confirm("已启用，您需要将数据停用吗, 是否继续?","提示",{confirmButtonText:"停用",cancelButtonText:"取消",type:"warning"}).then(function(){a.url="/testftcg/config/closeVillage?token="+localStorage.token+"&villageId="+t.id,a.$axios.get(a.url).then(function(e){console.log(e),(e.data.code=1)?(a.getData(a.jid),a.$message.success("停用成功")):a.$message.error(e.data.msg)})}).catch(function(){}):"已停用"==t.isOpen&&this.$confirm("已停用，您需要将数据启用吗, 是否继续?","提示",{confirmButtonText:"启用",cancelButtonText:"取消",type:"warning"}).then(function(){a.url="/testftcg/config/openVillage?token="+localStorage.token+"&villageId="+t.id,a.$axios.get(a.url).then(function(e){console.log(e),(e.data.code=1)?(a.getData(a.jid),a.$message.success("启用成功")):a.$message.error(e.data.msg)})}).catch(function(){})},xadd:function(e,t){this.xaddVisible=!0},xaddtable:function(){var e=this;null==this.form.xaddname?this.$message.error("请输入数据后再提交"):(this.url="/testftcg/config/baseConfigCommunity?token="+localStorage.token+"&name="+this.form.xaddname+"&number="+this.form.xaddnumber+"&address="+this.form.xaddaddress+"&personCharge="+this.form.xaddpersonCharge+"&phone="+this.form.xaddphone+"&remarks="+this.form.xaddremarks+"&streetId="+this.jid,this.$axios.get(this.url).then(function(t){console.log(t),(t.data.code=1)?(e.xaddVisible=!1,e.$message.success("街道数据新增成功"),e.form.xaddname="",e.form.xaddnumber="",e.form.xaddaddress="",e.form.xaddpersonCharge="",e.form.xaddphone="",e.form.xaddremarks="",e.xgetData(e.jid)):e.$message.error(t.data.msg)}))},filterTag:function(e,t){return t.tag===e},handleEdit:function(e,t){this.xid=t.id,console.log("Aid:"+this.xid),this.editVisible=!0,this.form.name=this.otableData[e].name,this.form.number=this.otableData[e].number,this.form.address=this.otableData[e].address,this.form.personCharge=this.otableData[e].personCharge,this.form.phone=this.otableData[e].phone,this.form.remarks=this.otableData[e].remarks},saveEdit:function(e,t){var a=this;this.url="/testftcg/config/editBaseConfigVillage?token="+localStorage.token+"&name="+this.form.name+"&number="+this.form.number+"&address="+this.form.address+"&personCharge="+this.form.personCharge+"&phone="+this.form.phone+"&remarks="+this.form.remarks+"&villageId="+this.xid,this.$axios.get(this.url).then(function(e){console.log(e),(e.data.code=1)?(a.editVisible=!1,a.$message.success("街道数据编辑成功"),a.form.name="",a.form.number="",a.form.address="",a.form.personCharge="",a.form.phone="",a.form.remarks="",a.getData(a.jid)):a.$message.error(e.data.msg)})},xhandleEdit:function(e,t){this.sid=t.id,this.xeditVisible=!0,this.form.name=this.xtableData[e].name,this.form.number=this.xtableData[e].number,this.form.address=this.xtableData[e].address,this.form.personCharge=this.xtableData[e].personCharge,this.form.phone=this.xtableData[e].phone,this.form.remarks=this.xtableData[e].remarks},xsaveEdit:function(e,t){var a=this;this.url="/testftcg/config/editBaseConfigCommunity?token="+localStorage.token+"&name="+this.form.name+"&number="+this.form.number+"&address="+this.form.address+"&personCharge="+this.form.personCharge+"&phone="+this.form.phone+"&remarks="+this.form.remarks+"&communityId="+this.sid,this.$axios.get(this.url).then(function(e){console.log(e),(e.data.code=1)?(a.xeditVisible=!1,a.$message.success("社区数据编辑成功"),a.form.name="",a.form.number="",a.form.address="",a.form.personCharge="",a.form.phone="",a.form.remarks="",a.xgetData(a.jid)):a.$message.error(e.data.msg)})},handleSelectionChange:function(e){this.multipleSelection=e},handleDelete:function(e,t){var a=this;console.log(t.id),this.$confirm("此操作将删除本条小区/机关/学校/收储运公司数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.url="/testftcg/config/deleteVillage?token="+localStorage.token+"&villageId="+t.id,a.$axios.get(a.url).then(function(e){console.log(e),(e.status=200)?(a.xgetData(a.jid),a.$message.success("删除成功")):a.$message.error(e.data.msg),a.getData(a.jid)})}).catch(function(){})}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.showtable,expression:"showtable"}],staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-lx-cascades"}),e._v(" 街道基础数据")])],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.showtable,expression:"!showtable"}],staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-lx-cascades"}),e._v(" 街道基础数据--社区基础数据")])],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showtable,expression:"showtable"}],staticClass:"container"},[a("div",{staticClass:"handle-box"},[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.tableData,function(e){return a("el-tab-pane",{key:e.id,attrs:{label:e.name,name:e.name}})})),e._v(" "),a("el-dropdown",{attrs:{trigger:"click"},on:{command:e.add}},[a("el-button",{attrs:{type:"primary"}},[e._v("\n          新建小区/机关/学校"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.slist,function(t){return a("el-dropdown-item",{key:t.id,attrs:{command:t.id,divided:""}},[e._v(e._s(t.name))])}))],1)],1),e._v(" "),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.otableData,border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{prop:"id",label:"id",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名字",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"类型",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"number",label:"编号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"address",label:"地址",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"personCharge",label:"负责人",width:"70"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"号码",width:"70"}}),e._v(" "),a("el-table-column",{attrs:{prop:"remarks",label:"备注",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"isOpen",label:"启用状态",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"260",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")]),e._v(" "),a("el-button",{staticClass:"blue",attrs:{type:"text",icon:"el-icon-info"},on:{click:function(a){e.handleisopen(t.$index,t.row)}}},[e._v("启用/停用")])]}}])})],1),e._v(" "),a("div",{staticClass:"pagination"})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.showtable,expression:"!showtable"}],staticClass:"container"},[a("div",{staticClass:"handle-box"},[a("el-button",{attrs:{type:"primary",icon:"search"},on:{click:e.back}},[e._v("返回")]),e._v(" "),a("el-button",{staticClass:"add",attrs:{type:"primary",icon:"search"},on:{click:e.xadd}},[e._v("新增社区")])],1),e._v(" "),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.xtableData,border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{prop:"id",label:"id",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"社区名",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"number",label:"编号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"address",label:"地址",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"personCharge",label:"负责人",width:"70"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"号码",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"remarks",label:"备注",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"260",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){e.xhandleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(a){e.xhandleDelete(t.$index,t.row)}}},[e._v("删除")]),e._v(" "),a("el-button",{staticClass:"blue",attrs:{type:"text",icon:"el-icon-info"},on:{click:function(a){e.xhandlecheck(t.$index,t.row)}}},[e._v("查看社区内住户")])]}}])})],1),e._v(" "),a("div",{staticClass:"pagination"})],1),e._v(" "),a("el-dialog",{attrs:{title:"新增小区/机关/学校/收储运公司",visible:e.addVisible,width:"30%"},on:{"update:visible":function(t){e.addVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"70px"}},[a("el-form-item",{attrs:{label:"分类"}},[a("el-select",{attrs:{placeholder:"请选择用户"},model:{value:e.form.addrole,callback:function(t){e.$set(e.form,"addrole",t)},expression:"form.addrole"}},[a("el-option",{key:"0",attrs:{label:"普通小区",value:"0"}}),e._v(" "),a("el-option",{key:"1",attrs:{label:"学校",value:"1"}}),e._v(" "),a("el-option",{key:"2",attrs:{label:"机关",value:"2"}}),e._v(" "),a("el-option",{key:"3",attrs:{label:"收储运公司",value:"3"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{attrs:{placeholder:"输入小区/机关/学校/收储运公司名字"},model:{value:e.form.addname,callback:function(t){e.$set(e.form,"addname",t)},expression:"form.addname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"编号"}},[a("el-input",{attrs:{placeholder:"输入编号"},model:{value:e.form.addnumber,callback:function(t){e.$set(e.form,"addnumber",t)},expression:"form.addnumber"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"地址"}},[a("el-input",{attrs:{placeholder:"输入地址"},model:{value:e.form.addaddress,callback:function(t){e.$set(e.form,"addaddress",t)},expression:"form.addaddress"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"负责人"}},[a("el-input",{attrs:{placeholder:"输入负责人"},model:{value:e.form.addpersonCharge,callback:function(t){e.$set(e.form,"addpersonCharge",t)},expression:"form.addpersonCharge"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系电话"}},[a("el-input",{attrs:{placeholder:"输入联系电话"},model:{value:e.form.addphone,callback:function(t){e.$set(e.form,"addphone",t)},expression:"form.addphone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{placeholder:"输入备注"},model:{value:e.form.addremarks,callback:function(t){e.$set(e.form,"addremarks",t)},expression:"form.addremarks"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addtable}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑小区/机关/学校/收储运公司数据",visible:e.editVisible,width:"30%"},on:{"update:visible":function(t){e.editVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"70px"}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{attrs:{placeholder:"输入街道名"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"编号"}},[a("el-input",{attrs:{placeholder:"输入编号"},model:{value:e.form.number,callback:function(t){e.$set(e.form,"number",t)},expression:"form.number"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"地址"}},[a("el-input",{attrs:{placeholder:"输入地址"},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"负责人"}},[a("el-input",{attrs:{placeholder:"输入负责人"},model:{value:e.form.personCharge,callback:function(t){e.$set(e.form,"personCharge",t)},expression:"form.personCharge"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系电话"}},[a("el-input",{attrs:{placeholder:"输入联系电话"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{placeholder:"输入备注"},model:{value:e.form.remarks,callback:function(t){e.$set(e.form,"remarks",t)},expression:"form.remarks"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.saveEdit}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"新增社区",visible:e.xaddVisible,width:"30%"},on:{"update:visible":function(t){e.xaddVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"70px"}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{attrs:{placeholder:"输入社区名"},model:{value:e.form.xaddname,callback:function(t){e.$set(e.form,"xaddname",t)},expression:"form.xaddname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"编号"}},[a("el-input",{attrs:{placeholder:"输入编号"},model:{value:e.form.xaddnumber,callback:function(t){e.$set(e.form,"xaddnumber",t)},expression:"form.xaddnumber"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"地址"}},[a("el-input",{attrs:{placeholder:"输入地址"},model:{value:e.form.xaddaddress,callback:function(t){e.$set(e.form,"xaddaddress",t)},expression:"form.xaddaddress"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"负责人"}},[a("el-input",{attrs:{placeholder:"输入负责人"},model:{value:e.form.xaddpersonCharge,callback:function(t){e.$set(e.form,"xaddpersonCharge",t)},expression:"form.xaddpersonCharge"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系电话"}},[a("el-input",{attrs:{placeholder:"输入联系电话"},model:{value:e.form.xaddphone,callback:function(t){e.$set(e.form,"xaddphone",t)},expression:"form.xaddphone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{placeholder:"输入备注"},model:{value:e.form.xaddremarks,callback:function(t){e.$set(e.form,"xaddremarks",t)},expression:"form.xaddremarks"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.xaddVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.xaddtable}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var l=a("VU/8")(o,s,!1,function(e){a("XZN4")},"data-v-51ee78b0",null);t.default=l.exports},XZN4:function(e,t){}});