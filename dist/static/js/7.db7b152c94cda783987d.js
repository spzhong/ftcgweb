webpackJsonp([7],{"5YHc":function(t,e){},Agv0:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"assessmentlist",data:function(){return{tableData:[],otableData:[],xtableData:[],pic:[],cur_page:1,activeName:"",imagesUrl:[],jid:"",sid:"",multipleSelection:[],select_cate:"",select_word:"",del_list:[],is_search:!1,addVisible:!1,editVisible:!1,xaddVisible:!1,xeditVisible:!1,showtable:!0,form:{name:"",date:"",phone:""},idx:-1,pagenum:0}},created:function(){var t=this;this.jid="",this.url="/testftcg/config/getStreets?token="+localStorage.token,this.$axios.get(this.url).then(function(e){1!=e.data.code?t.$message.error(e.data.msg):(e.data.code=1)?(t.tableData=e.data.data,t.activeName=t.tableData[0].name,t.jid=t.tableData[0].id,setTimeout(function(){t.getData(t.tableData[0].id)},300)):console.log("不知出啥问题了")})},computed:{},methods:{handleCurrentChange:function(t){this.cur_page=t,this.$message("点击了分页")},getData:function(t){var e=this;this.url="/testftcg/assessment/getAssessmentList?streetId="+t+"&token="+localStorage.token+"&page="+this.pagenum+"&pageSize=20",this.$axios.get(this.url).then(function(t){1!=t.data.code?e.$message.error(t.data.msg):(t.data.code=1)?(e.otableData=t.data.data,e.otableData.some(function(t){var a={0:"普通小区",1:"学校",2:"政府机关",3:"收储运公司"},s={0:"进行中",1:"审核中",2:"审核打回",3:"审核通过","-1":"已删除"};e.otableData.map(function(t){var e=t.type,o=t.state;return t.type=a[e]?a[e]:e,t.state=s[o]?s[o]:o,t})})):console.log("不知出啥问题了")})},handleClick:function(t,e){this.otableData="";var a=this.tableData[t.index].id;this.getData(a)},xgetData:function(t){var e=this;this.xtableData="",this.url="/testftcg/assessment/getAssessmentDetails?token="+localStorage.token+"&userAssessmentId="+t,this.$axios.get(this.url).then(function(t){1!=t.data.code?e.$message.error(t.data.msg):(t.data.code=1)?(e.xtableData=t.data.data.questionList,console.log(t)):console.log("不知出啥问题了")})},handlecheck:function(t,e){this.showtable=!this.showtable,this.xgetData(e.id),localStorage.setItem("xid",e.id),this.jid=e.id,console.log(this.jid)},handleDo:function(t,e){var a=this;this.$confirm("是否需要审核本条记录?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$message.error("审核开发中")}).catch(function(){})},handleshowpic:function(t,e){console.log(e.id),console.log(t),this.pic=this.xtableData[t].answerInfo.imgs,console.log(this.pic)},back:function(){this.showtable=!this.showtable},add:function(){this.addVisible=!0},timestampToTime:function(t,e){var a=new Date(t.createTime);return a.getFullYear()+"-"+((a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1)+"-")+(a.getDate()+" ")+(a.getHours()+":")+(a.getMinutes()+":")+a.getSeconds()},addtable:function(){var t=this;null==this.form.addname||this.form.addrole?this.$message.error("请输入数据后再提交"):(this.url="/testftcg/config/baseConfigVillage?token="+localStorage.token+"&name="+this.form.addname+"&number="+this.form.addnumber+"&address="+this.form.addaddress+"&personCharge="+this.form.addpersonCharge+"&phone="+this.form.addphone+"&remarks="+this.form.addremarks,this.$axios.get(this.url).then(function(e){console.log(e),(e.status=200)?(t.addVisible=!1,t.$message.success("街道数据新增成功"),t.form.addname="",t.form.addnumber="",t.form.addaddress="",t.form.addpersonCharge="",t.form.addphone="",t.form.addremarks="",t.getData()):t.$message.error(e.data.msg)}))},xadd:function(t,e){this.xaddVisible=!0},xaddtable:function(){var t=this;null==this.form.xaddname?this.$message.error("请输入数据后再提交"):(this.url="/testftcg/config/baseConfigCommunity?token="+localStorage.token+"&name="+this.form.xaddname+"&number="+this.form.xaddnumber+"&address="+this.form.xaddaddress+"&personCharge="+this.form.xaddpersonCharge+"&phone="+this.form.xaddphone+"&remarks="+this.form.xaddremarks+"&streetId="+this.jid,this.$axios.get(this.url).then(function(e){console.log(e),(e.data.code=1)?(t.xaddVisible=!1,t.$message.success("街道数据新增成功"),t.form.xaddname="",t.form.xaddnumber="",t.form.xaddaddress="",t.form.xaddpersonCharge="",t.form.xaddphone="",t.form.xaddremarks="",t.xgetData(t.jid)):t.$message.error(e.data.msg)}))},filterTag:function(t,e){return e.tag===t},handleEdit:function(t,e){this.jid=e.id,this.editVisible=!0,this.form.name=this.otableData[t].name,this.form.number=this.otableData[t].number,this.form.address=this.otableData[t].address,this.form.personCharge=this.otableData[t].personCharge,this.form.phone=this.otableData[t].phone,this.form.remarks=this.otableData[t].remarks},saveEdit:function(t,e){var a=this;this.url="/testftcg/config/editBaseConfigVillage?token="+localStorage.token+"&name="+this.form.name+"&number="+this.form.number+"&address="+this.form.address+"&personCharge="+this.form.personCharge+"&phone="+this.form.phone+"&remarks="+this.form.remarks+"&streetId="+this.jid,this.$axios.get(this.url).then(function(t){console.log(t),(t.data.code=1)?(a.editVisible=!1,a.$message.success("街道数据编辑成功"),a.form.name="",a.form.number="",a.form.address="",a.form.personCharge="",a.form.phone="",a.form.remarks="",a.getData()):a.$message.error(t.data.msg)})},xhandleEdit:function(t,e){this.sid=e.id,this.xeditVisible=!0,this.form.name=this.xtableData[t].name,this.form.number=this.xtableData[t].number,this.form.address=this.xtableData[t].address,this.form.personCharge=this.xtableData[t].personCharge,this.form.phone=this.xtableData[t].phone,this.form.remarks=this.xtableData[t].remarks},xsaveEdit:function(t,e){var a=this;this.url="/testftcg/config/editBaseConfigCommunity?token="+localStorage.token+"&name="+this.form.name+"&number="+this.form.number+"&address="+this.form.address+"&personCharge="+this.form.personCharge+"&phone="+this.form.phone+"&remarks="+this.form.remarks+"&communityId="+this.sid,this.$axios.get(this.url).then(function(t){console.log(t),(t.data.code=1)?(a.xeditVisible=!1,a.$message.success("社区数据编辑成功"),a.form.name="",a.form.number="",a.form.address="",a.form.personCharge="",a.form.phone="",a.form.remarks="",a.xgetData(a.jid)):a.$message.error(t.data.msg)})},handleSelectionChange:function(t){this.multipleSelection=t},handleDelete:function(t,e){var a=this;this.idx=t,this.$confirm("此操作将删除本条街道数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){console.log(a.tableData[a.idx].id),a.url="/testftcg/config/deleteStreet?token="+localStorage.token+"&streetId="+a.tableData[a.idx].id,a.$axios.get(a.url).then(function(t){console.log(t),(t.status=200)?(a.xgetData(a.jid),a.$message.success("删除成功")):a.$message.error(t.data.msg),a.getData()})}).catch(function(){})},xhandleDelete:function(t,e){var a=this;console.log(e.id),this.$confirm("此操作将删除本条社区数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.url="/testftcg/config/deleteCommunity?token="+localStorage.token+"&communityId="+e.id,a.$axios.get(a.url).then(function(t){console.log(t),(t.status=200)?(a.xgetData(a.jid),a.$message.success("删除成功")):a.$message.error(t.data.msg),a.getData()})}).catch(function(){})}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.showtable,expression:"showtable"}],staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-lx-cascades"}),t._v(" 考核日志")])],1)],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.showtable,expression:"!showtable"}],staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-lx-cascades"}),t._v(" 考核日志--考核详情")])],1)],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showtable,expression:"showtable"}],staticClass:"container"},[a("div",{staticClass:"handle-box"},[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},t._l(t.tableData,function(t){return a("el-tab-pane",{key:t.id,attrs:{label:t.name,name:t.name}})}))],1),t._v(" "),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:t.otableData,border:""},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{prop:"id",label:"id",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"type",label:"类型",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"totalFraction",label:"分数",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"correctTotalFraction",label:"审核分数",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"state",label:"状态",width:"70"}}),t._v(" "),a("el-table-column",{attrs:{prop:"userInfo.name",label:"操作人",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"createTime",formatter:t.timestampToTime,label:"提交时间",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"260",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",icon:"el-icon-info"},on:{click:function(a){t.handlecheck(e.$index,e.row)}}},[t._v("查看详情")]),t._v(" "),a("el-button",{staticClass:"blue",attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){t.handleDo(e.$index,e.row)}}},[t._v("审核")])]}}])})],1),t._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:1500},on:{"current-change":t.handleCurrentChange}})],1)],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.showtable,expression:"!showtable"}],staticClass:"container"},[a("div",{staticClass:"handle-box"},[a("el-button",{staticClass:"add",attrs:{type:"primary",icon:"search"},on:{click:t.back}},[t._v("返回")])],1),t._v(" "),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:t.xtableData,border:""},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{prop:"id",label:"id",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"info",label:"问题",width:"340"}}),t._v(" "),a("el-table-column",{attrs:{prop:"fraction",label:"问题分数",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"answerInfo.fraction",label:"考核得分",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"imgs",label:"描述图片"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.answerInfo,function(s){return a("div",{key:s.id},t._l(e.row.answerInfo.imgs,function(t){return a("img",{key:t.id,staticStyle:{width:"40px",height:"40px"},attrs:{src:t.url}})}))})}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"260",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{slot:"reference"},on:{click:function(a){t.handleshowpic(e.$index,e.row)}},slot:"reference"},[t._v("查看图片")])]}}])})],1),t._v(" "),a("div",{staticClass:"pagination"})],1)])},staticRenderFns:[]};var i=a("VU/8")(s,o,!1,function(t){a("5YHc")},"data-v-a7f36f22",null);e.default=i.exports}});